## 📖 Item6. 불필요한 객체 생성을 해제해라

---

똑같은 기능의 객체를 매번 생성하기보다는 객체 하나를 재사용하는 편이 나을 때가 많음
- 불변 객체는 언제든 재사용 할 수 있음

예시 - 매번 String 인스턴스를 만드는 코드
```Java
String s = new String("bikini");
```

- 해당 문장은 반복문이나, 빈번히 호출되는 메소드 안에 있다면 쓸데 없는 String 인스턴스가 수 백게 만들 수 있음

예시 - 개선한 버전
```Java
String s = "bikini";
```

- 새로운 인스턴스를 매번 만드는 대신, 하나의 String 인스턴스를 사용함
- 같은 가상 머신의 안에서 이와 같은 문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함이 보장됨
<br/>

**정적 팩터리 메소드를 제공하는 불변 클래스**
- 정적 팩터리 메소드를 사용하여 불필요한 객체 생성을 피할 수 있음
- 생성자는 호출할 때마다 새로운 객체를 만들지만, 팩터리 메소드는 그렇지 않음
- 불변 객체뿐만 아닌, 가변 객체라해도 사용중 변경되지 않을 것이라면 재사용할 수 있음
- 생성 비용이 아주 비싼 객체는 캐싱하여 재사용을 권장함

**예시 - 생성 비용이 비싼 객체(문자열이 유효한 로마 숫자인지 확인하는 메서드 작성)**
<br/>
문제점 - String.match 메소드를 사용함
- String.matchex는 정규 표현식을 문자열 형태를 확인하는 가장 쉬운 방법이지만, 성능이 중요한 상황에서 반복하여 사용하기에는 적합하지 않음
- 해당 메소드가 내부에서 만드는 정규 표현식용 Pattern 인스턴스는 한 번 사용되고 바로 버려져 GC 대상이 됨
- Pattern은 입력받은 정규 표현식에 해당하는 유한 상태 머신을 만들기 때문에 인스턴스 생성 비용이 높음

**성능 개선**
- 필요한 정규 표현식을 표현하는 Pattern 인스턴스를 클래스 초기화 과정에서 직접 생성하여 캐싱해두고, 나중에 isRomanNumberal 메소드가 호출될 때마다 해당 인스턴스를 재사용함 <br/>
-> 이렇게 개선하면 isRomanNumberal가 빈번히 호출되는 상황에서 성능을 개선할 수 있음 <br/>
-> 약 6.5배 개선, 코드가 명확해짐
